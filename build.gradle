buildscript {
    repositories {
      maven {
        url "https://plugins.gradle.org/m2/"
      }
    }
    dependencies {
        classpath "edu.wpi.first:GradleRIO:2019.4.1"
    }
}

plugins {
    id "java-library"
    id "jacoco"
}

if(!project.getPlugins().hasPlugin("edu.wpi.first.GradleRIO")) {
    apply plugin: "edu.wpi.first.GradleRIO"
}

repositories {
    mavenCentral()
    jcenter()
}

sourceCompatibility = JavaVersion.VERSION_11
targetCompatibility = JavaVersion.VERSION_11

dependencies {
    api wpi.deps.wpilib()
    api wpi.deps.vendor.java()

    testImplementation 'org.hamcrest:hamcrest:2.1'
    testImplementation 'org.junit.jupiter:junit-jupiter:5.4.0'
    testImplementation 'org.mockito:mockito-core:2.+'
    testImplementation 'org.mockito:mockito-junit-jupiter:2.26+'
    testImplementation 'org.mockito:mockito-inline:2.26+'
    testImplementation group: 'org.jfree', name: 'jfreechart', version: '1.5.0'
}

test {
    maxParallelForks = 2
    systemProperty "graph", System.getProperty("graph")
    useJUnitPlatform()
    testLogging {
        events "passed", "skipped", "failed"
    }
    finalizedBy jacocoTestReport
}
